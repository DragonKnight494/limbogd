<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Limbo Key Game</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  background: black;
  overflow: hidden;
  touch-action: manipulation;
  font-family: Arial, sans-serif;
}

.key {
  position: absolute;
  width: 80px;
  height: 80px;
  background: red;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition:
    transform 0.6s cubic-bezier(.25,1.5,.5,1),
    background-color 0.3s,
    filter 0.3s;
}

.key img {
  width: 60px;
  pointer-events: none;
}

.green {
  background: #00ff55;
  filter: drop-shadow(0 0 20px #00ff55);
}

.result {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 160px;
  background: rgba(0,0,0,0.7);
  z-index: 999;
}
</style>
</head>

<body>

<script>
const keyCount = 8;
const keys = [];
let targetIndex = Math.floor(Math.random() * keyCount);
let scrambling = true;

// CREATE KEYS
for (let i = 0; i < keyCount; i++) {
  const div = document.createElement("div");
  div.className = "key";
  div.innerHTML = '<img src="key.png">';
  document.body.appendChild(div);
  keys.push(div);
}

// RANDOM MOVE (SMOOTH)
function moveKeys(speed) {
  keys.forEach(key => {
    const x = Math.random() * (window.innerWidth - 100);
    const y = Math.random() * (window.innerHeight - 100);
    const r = Math.random() * 360;

    key.style.transitionDuration = speed + "ms";
    key.style.transform = `translate(${x}px, ${y}px) rotate(${r}deg)`;
  });
}

// SHOW GREEN KEY
keys[targetIndex].classList.add("green");
setTimeout(() => {
  keys[targetIndex].classList.remove("green");
}, 2000);

// SCRAMBLE PHASE (~15 seconds)
let ticks = 0;
const scramble = setInterval(() => {
  ticks++;

  // speed changes fast <-> slow
  const speed = 250 + Math.abs(Math.sin(ticks / 3)) * 900;
  moveKeys(speed);

  // screen shake
  document.body.style.transform =
    `translate(${Math.random()*6-3}px, ${Math.random()*6-3}px)`;

  if (ticks > 30) {
    clearInterval(scramble);
    scrambling = false;
    document.body.style.transform = "translate(0,0)";
    keys.forEach(k => k.style.transitionDuration = "800ms");
  }
}, 500);

// CLICK CHECK
keys.forEach((key, index) => {
  key.addEventListener("click", () => {
    if (scrambling) return;

    if (index === targetIndex) {
      showResult("✔", "#00ff55");
    } else {
      showResult("✖", "red");
    }

    setTimeout(() => location.reload(), 1200);
  });
});

function showResult(symbol, color) {
  const div = document.createElement("div");
  div.className = "result";
  div.textContent = symbol;
  div.style.color = color;
  document.body.appendChild(div);
}
</script>

</body>
</html>
